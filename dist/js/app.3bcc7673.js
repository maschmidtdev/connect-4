(function(e){function t(t){for(var r,s,u=t[0],i=t[1],o=t[2],b=0,d=[];b<u.length;b++)s=u[b],Object.prototype.hasOwnProperty.call(a,s)&&a[s]&&d.push(a[s][0]),a[s]=0;for(r in i)Object.prototype.hasOwnProperty.call(i,r)&&(e[r]=i[r]);l&&l(t);while(d.length)d.shift()();return c.push.apply(c,o||[]),n()}function n(){for(var e,t=0;t<c.length;t++){for(var n=c[t],r=!0,u=1;u<n.length;u++){var i=n[u];0!==a[i]&&(r=!1)}r&&(c.splice(t--,1),e=s(s.s=n[0]))}return e}var r={},a={app:0},c=[];function s(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.m=e,s.c=r,s.d=function(e,t,n){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)s.d(n,r,function(t){return e[t]}.bind(null,r));return n},s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="/";var u=window["webpackJsonp"]=window["webpackJsonp"]||[],i=u.push.bind(u);u.push=t,u=u.slice();for(var o=0;o<u.length;o++)t(u[o]);var l=i;c.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"0b98":function(e,t,n){"use strict";n("c44d")},"0c68":function(e,t,n){"use strict";n("0f8f")},"0f8f":function(e,t,n){},1:function(e,t){},"117e":function(e,t,n){"use strict";n("24e7")},"24e7":function(e,t,n){},"42b0":function(e,t,n){},"56d7":function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var r=n("7a23");function a(e,t,n,a,c,s){var u=Object(r["y"])("topnav"),i=Object(r["y"])("router-view");return Object(r["r"])(),Object(r["e"])(r["a"],null,[Object(r["h"])(u,{user:s.user},null,8,["user"]),Object(r["h"])(i,{user:s.user},null,8,["user"])],64)}var c={key:0,class:"topnav"},s=Object(r["g"])("Home"),u=Object(r["g"])("Profile"),i=["src","alt"];function o(e,t,n,a,o,l){var b=Object(r["y"])("router-link");return e.$store.state.authenticated?(Object(r["r"])(),Object(r["e"])("div",c,[Object(r["f"])("h1",null,"Welcome "+Object(r["A"])(n.user.username)+" !",1),Object(r["f"])("ul",null,[Object(r["f"])("li",null,[Object(r["h"])(b,{to:{name:"home"}},{default:Object(r["E"])((function(){return[s]})),_:1})]),Object(r["f"])("li",null,[Object(r["h"])(b,{to:{name:"profile"}},{default:Object(r["E"])((function(){return[u]})),_:1})]),Object(r["f"])("li",null,[Object(r["f"])("button",{onClick:t[0]||(t[0]=function(){return l.handleClick&&l.handleClick.apply(l,arguments)})}," Logout ")]),Object(r["f"])("img",{src:n.user.image_url,alt:n.user.username},null,8,i)])])):Object(r["d"])("",!0)}n("ac1f"),n("5319");var l={props:["user"],methods:{handleClick:function(){this.$store.commit("setAuthentication",!1),this.$store.commit("setUser",null),this.$router.replace({name:"login"})}}},b=(n("0b98"),n("6b0d")),d=n.n(b);const p=d()(l,[["render",o],["__scopeId","data-v-bb7efa54"]]);var m=p,O=n("8055"),j=n.n(O),f=j()();console.log("Starting connection to Websocket Server"),f.on("connected",(function(){console.log("connected!")})),f.on("login",(function(){console.log("login successful!")})),f.on("user_joined",(function(e){console.log("A user joined the game:",e)}));var g=f,h={name:"App",data:function(){return{socket:g}},components:{Topnav:m},computed:{user:function(){return this.$store.state.user}}};n("9a7c"),n("ce42");const y=d()(h,[["render",a]]);var _=y,v=n("6c02"),k=n("5502"),w=Object(k["a"])({state:{authenticated:!1,user:{},game:{}},getters:{},mutations:{setAuthentication:function(e,t){e.authenticated=t},setUser:function(e,t){e.user=t},setGame:function(e,t){e.game=t}},actions:{}}),x={class:"login"},A=Object(r["f"])("h1",null,"Login",-1);function C(e,t,n,a,c,s){return Object(r["r"])(),Object(r["e"])("div",x,[A,Object(r["F"])(Object(r["f"])("input",{type:"text",name:"email","onUpdate:modelValue":t[0]||(t[0]=function(e){return c.email=e}),placeholder:"Email",required:""},null,512),[[r["C"],c.email]]),Object(r["F"])(Object(r["f"])("input",{type:"password",name:"password","onUpdate:modelValue":t[1]||(t[1]=function(e){return c.password=e}),placeholder:"Password"},null,512),[[r["C"],c.password]]),Object(r["f"])("button",{type:"button",onClick:t[2]||(t[2]=function(e){return s.login(c.email,c.password)})}," Login ")])}var S=n("bc3a"),E=n.n(S);E.a.defaults.withCredentials=!0;var P=E.a,R={name:"Login",data:function(){return{email:"",password:""}},methods:{login:function(e,t){var n=this;P.post("/api/login",{email:e,password:t}).then((function(e){var t=e.data;t&&(n.$store.commit("setAuthentication",!0),n.$store.commit("setUser",t),n.$router.replace({name:"home"}))})).catch((function(e){console.log(e.response.data.error)}))}}};const I=d()(R,[["render",C]]);var U=I,$={class:"home"};function G(e,t,n,a,c,s){var u=Object(r["y"])("gamelist"),i=Object(r["y"])("userlist");return Object(r["r"])(),Object(r["e"])("div",$,[Object(r["h"])(u),Object(r["h"])(i)])}var L=function(e){return Object(r["u"])("data-v-604d43c8"),e=e(),Object(r["s"])(),e},T={key:0,class:"userlist"},J={key:0},M={key:1},V=["src"],N=["onClick"],F=L((function(){return Object(r["f"])("h2",null,"Users",-1)})),H={key:2},W=["src"],q=["onClick"],Y={key:1};function z(e,t,n,a,c,s){var u;return e.loading?(Object(r["r"])(),Object(r["e"])("div",Y,"Loading...")):(Object(r["r"])(),Object(r["e"])("div",T,[(null===(u=e.challengers)||void 0===u?void 0:u.length)>0?(Object(r["r"])(),Object(r["e"])("h2",J,"Challengers")):Object(r["d"])("",!0),e.challengers?(Object(r["r"])(),Object(r["e"])("ul",M,[(Object(r["r"])(!0),Object(r["e"])(r["a"],null,Object(r["x"])(e.challengers,(function(t){return Object(r["r"])(),Object(r["e"])("li",{class:"user",key:t.id},[Object(r["f"])("img",{src:t.image_url,alt:""},null,8,V),Object(r["f"])("span",null,Object(r["A"])(t.username),1),Object(r["f"])("button",{onClick:function(n){return e.accept(t.id)}},"Accept challenge!",8,N)])})),128))])):Object(r["d"])("",!0),F,e.users?(Object(r["r"])(),Object(r["e"])("ul",H,[(Object(r["r"])(!0),Object(r["e"])(r["a"],null,Object(r["x"])(s.otherUsers,(function(t){return Object(r["r"])(),Object(r["e"])("li",{class:"user",key:t.id},[Object(r["f"])("img",{src:t.image_url,alt:""},null,8,W),Object(r["f"])("span",null,Object(r["A"])(t.username),1),Object(r["f"])("button",{onClick:function(n){return e.challenge(t.id)}},"Challenge!",8,q)])})),128))])):Object(r["d"])("",!0)]))}var B=n("1da1"),D=(n("4de4"),n("96cf"),{data:function(){return{loading:!0,user_id:null,challengers:null,users:null}},mounted:function(){var e=this;return Object(B["a"])(regeneratorRuntime.mark((function t(){var n,r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,P.get("/api/user_id");case 2:return n=t.sent,t.next=5,P.get("/api/users");case 5:r=t.sent,a=r.data,e.user_id=n.data,e.challengers=a.challengers,e.users=a.users,e.loading=!1;case 11:case"end":return t.stop()}}),t)})))()},computed:{otherUsers:function(){var e=this;return this.users?this.users.filter((function(t){return t.id!==e.user_id})):null}}});n("0c68");const K=d()(D,[["render",z],["__scopeId","data-v-604d43c8"]]);var Q=K,X=function(e){return Object(r["u"])("data-v-0defa2ff"),e=e(),Object(r["s"])(),e},Z={key:0,class:"gamelist"},ee={key:0},te={key:1},ne={key:2},re=["src","alt"],ae=["src","alt"],ce={key:2,class:"player-1"},se={key:3,class:"player-2"},ue=X((function(){return Object(r["f"])("br",null,null,-1)})),ie={key:3},oe={key:4},le=["src","alt"],be={class:"player-1"},de=Object(r["g"])(" VS "),pe={class:"player-2"},me=["src","alt"],Oe={key:1};function je(e,t,n,a,c,s){var u=Object(r["y"])("router-link");return c.loading?(Object(r["r"])(),Object(r["e"])("div",Oe,"Loading...")):(Object(r["r"])(),Object(r["e"])("div",Z,[c.self_games.length>0?(Object(r["r"])(),Object(r["e"])("h2",ee,"Your current games")):(Object(r["r"])(),Object(r["e"])("h2",te,"No active games - challenge someone!")),c.self_games?(Object(r["r"])(),Object(r["e"])("ul",ne,[(Object(r["r"])(!0),Object(r["e"])(r["a"],null,Object(r["x"])(c.self_games,(function(e){return Object(r["r"])(),Object(r["e"])("li",{class:"game",key:e.id},[Object(r["h"])(u,{to:{name:"game",params:{game_id:e.id}}},{default:Object(r["E"])((function(){return[Object(r["f"])("h3",null,[e.player_1.id!==c.user_id?(Object(r["r"])(),Object(r["e"])("img",{key:0,src:e.player_1.image_url,alt:e.player_1.username},null,8,re)):Object(r["d"])("",!0),e.player_2.id!==c.user_id?(Object(r["r"])(),Object(r["e"])("img",{key:1,src:e.player_2.image_url,alt:e.player_2.username},null,8,ae)):Object(r["d"])("",!0),e.player_1.id!==c.user_id?(Object(r["r"])(),Object(r["e"])("span",ce,Object(r["A"])(e.player_1.username),1)):Object(r["d"])("",!0),e.player_2.id!==c.user_id?(Object(r["r"])(),Object(r["e"])("span",se,Object(r["A"])(e.player_2.username),1)):Object(r["d"])("",!0)])]})),_:2},1032,["to"])])})),128))])):Object(r["d"])("",!0),ue,c.other_games.length>0?(Object(r["r"])(),Object(r["e"])("h2",ie,"Other games")):Object(r["d"])("",!0),c.other_games?(Object(r["r"])(),Object(r["e"])("ul",oe,[(Object(r["r"])(!0),Object(r["e"])(r["a"],null,Object(r["x"])(c.other_games,(function(e){return Object(r["r"])(),Object(r["e"])("li",{class:"game",key:e.id},[Object(r["h"])(u,{to:{name:"game",params:{game_id:e.id}}},{default:Object(r["E"])((function(){return[Object(r["f"])("h3",null,[Object(r["f"])("img",{src:e.player_1.image_url,alt:e.player_1.username},null,8,le),Object(r["f"])("span",be,Object(r["A"])(e.player_1.username),1),de,Object(r["f"])("span",pe,Object(r["A"])(e.player_2.username),1),Object(r["f"])("img",{src:e.player_2.image_url,alt:e.player_2.username},null,8,me)])]})),_:2},1032,["to"])])})),128))])):Object(r["d"])("",!0)]))}n("d3b7"),n("ddb0");var fe={data:function(){return{loading:!0,self_games:null,other_games:null,user_id:null}},mounted:function(){var e=this;return Object(B["a"])(regeneratorRuntime.mark((function t(){var n,r,a,c,s,u,i,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,P.get("/api/games");case 2:return n=t.sent,r=n.data,t.next=6,P.get("/api/user_id");case 6:a=t.sent,c=r,s=a.data,e.user_id=s,t.t0=regeneratorRuntime.keys(c);case 11:if((t.t1=t.t0()).done){t.next=23;break}return o=t.t1.value,t.next=15,P.get("/api/user/".concat(c[o].player_1));case 15:return u=t.sent,t.next=18,P.get("/api/user/".concat(c[o].player_2));case 18:i=t.sent,c[o].player_1=u.data,c[o].player_2=i.data,t.next=11;break;case 23:c=c.filter((function(e){return e.accepted})),e.self_games=c.filter((function(e){return e.player_1.id===s||e.player_2.id===s})),e.other_games=c.filter((function(e){return e.player_1.id!==s&&e.player_2.id!==s})),e.loading=!1;case 27:case"end":return t.stop()}}),t)})))()}};n("6958");const ge=d()(fe,[["render",je],["__scopeId","data-v-0defa2ff"]]);var he=ge,ye={props:["user"],components:{Userlist:Q,Gamelist:he},mounted:function(){}};n("70b7");const _e=d()(ye,[["render",G],["__scopeId","data-v-05a1dbde"]]);var ve=_e,ke=Object(r["f"])("h1",null,"Profile",-1),we=Object(r["g"])("Home");function xe(e,t,n,a,c,s){var u=Object(r["y"])("router-link");return Object(r["r"])(),Object(r["e"])(r["a"],null,[ke,Object(r["h"])(u,{to:{name:"home"}},{default:Object(r["E"])((function(){return[we]})),_:1})],64)}var Ae={};const Ce=d()(Ae,[["render",xe]]);var Se=Ce,Ee={key:0,class:"game"},Pe={class:"gameheader"},Re=["src","alt"],Ie={class:"player-1"},Ue=Object(r["g"])(" VS "),$e={class:"player-2"},Ge=["src","alt"],Le={key:0},Te={key:0},Je=Object(r["g"])(" It's "),Me={class:"player-1"},Ve=Object(r["g"])("'s turn. "),Ne={key:1},Fe=Object(r["g"])(" It's "),He={class:"player-2"},We=Object(r["g"])("'s turn. "),qe={key:1},Ye={key:0},ze={class:"player-1"},Be=Object(r["g"])(" won! "),De={key:1},Ke={class:"player-2"},Qe=Object(r["g"])(" won! "),Xe={class:"connect-four"},Ze={key:1};function et(e,t,n,a,c,s){var u=Object(r["y"])("game-column");return c.loading?(Object(r["r"])(),Object(r["e"])("div",Ze,"Loading...")):(Object(r["r"])(),Object(r["e"])("div",Ee,[Object(r["f"])("div",Pe,[Object(r["f"])("h2",null,[Object(r["f"])("img",{src:c.game.player_1.image_url,alt:c.game.player_1.username},null,8,Re),Object(r["f"])("span",Ie,Object(r["A"])(c.game.player_1.username),1),Ue,Object(r["f"])("span",$e,Object(r["A"])(c.game.player_2.username),1),Object(r["f"])("img",{src:c.game.player_2.image_url,alt:c.game.player_2.username},null,8,Ge)]),c.game.winner?(Object(r["r"])(),Object(r["e"])("div",qe,[c.game.turn===c.game.player_1.id?(Object(r["r"])(),Object(r["e"])("h3",Ye,[Object(r["f"])("span",ze,Object(r["A"])(c.game.player_1.username),1),Be])):(Object(r["r"])(),Object(r["e"])("h3",De,[Object(r["f"])("span",Ke,Object(r["A"])(c.game.player_2.username),1),Qe]))])):(Object(r["r"])(),Object(r["e"])("div",Le,[c.game.turn===c.game.player_1.id?(Object(r["r"])(),Object(r["e"])("h3",Te,[Je,Object(r["f"])("span",Me,Object(r["A"])(c.game.player_1.username),1),Ve])):(Object(r["r"])(),Object(r["e"])("h3",Ne,[Fe,Object(r["f"])("span",He,Object(r["A"])(c.game.player_2.username),1),We]))]))]),Object(r["f"])("div",Xe,[(Object(r["r"])(),Object(r["e"])(r["a"],null,Object(r["x"])(7,(function(e){return Object(r["h"])(u,{key:e,col:e-1,game:c.game},null,8,["col","game"])})),64))])]))}var tt=n("5530");function nt(e,t,n,a,c,s){var u=Object(r["y"])("game-cell");return c.loading?Object(r["d"])("",!0):(Object(r["r"])(),Object(r["e"])("div",{key:0,class:"column",onClick:t[0]||(t[0]=function(){return s.onClick&&s.onClick.apply(s,arguments)})},[(Object(r["r"])(),Object(r["e"])(r["a"],null,Object(r["x"])(6,(function(e){return Object(r["h"])(u,{key:e,position:6*n.col+(e-1),game:n.game},null,8,["position","game"])})),64))]))}var rt={class:"game-cell",type:"text/x-template"},at={class:"position"};function ct(e,t,n,a,c,s){return Object(r["r"])(),Object(r["e"])("div",rt,[Object(r["f"])("div",at,[Object(r["f"])("div",{class:Object(r["n"])(["circle",s.classObject])},Object(r["A"])(n.position),3)])])}n("caad"),n("2532");var st={props:["position","game"],data:function(){return{}},mounted:function(){},computed:{classObject:function(){return{"player-1":this.game.gamestate[this.position]===this.game.player_1.id,"player-2":this.game.gamestate[this.position]===this.game.player_2.id,win:this.game.winner&&this.game.winner.includes(this.position)}}}};n("7094");const ut=d()(st,[["render",ct],["__scopeId","data-v-1e736fb7"]]);var it=ut,ot={props:["col","game"],components:{GameCell:it},data:function(){return{loading:!0,user:null}},mounted:function(){var e=this;return Object(B["a"])(regeneratorRuntime.mark((function t(){var n,r,a,c,s,u,i,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,P.get("/api/user");case 2:n=t.sent,r=n.data,a=r.id,c=r.username,s=r.email,u=r.image_url,i=r.wins,o=r.losses,e.user={id:a,username:c,email:s,image_url:u,wins:i,losses:o},e.loading=!1;case 7:case"end":return t.stop()}}),t)})))()},watch:{},methods:{onClick:function(){g.emit("place_tile",{col:this.col,game_id:this.game.id,user_id:this.user.id})}}};n("6800");const lt=d()(ot,[["render",nt],["__scopeId","data-v-2bc3e84e"]]);var bt=lt,dt={props:["game_id","user"],components:{GameColumn:bt},data:function(){return{game:{},loading:!0}},mounted:function(){var e=this;return Object(B["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return g.emit("join_room",e.game_id),t.next=3,e.updateGame();case 3:g.on("game_update",(function(){e.updateGame()})),e.loading=!1;case 5:case"end":return t.stop()}}),t)})))()},methods:{updateGame:function(){var e=this;return Object(B["a"])(regeneratorRuntime.mark((function t(){var n,r,a,c;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,P.get("/api/game/".concat(e.game_id));case 2:return n=t.sent,r=n.data,t.next=6,P.get("/api/user/".concat(r.player_1));case 6:return a=t.sent,t.next=9,P.get("/api/user/".concat(r.player_2));case 9:if(c=t.sent,r){t.next=12;break}return t.abrupt("return",e.$router.push({name:"hone"}));case 12:return t.abrupt("return",new Promise((function(t){e.game=Object(tt["a"])(Object(tt["a"])({},r),{},{gamestate:JSON.parse(r.gamestate),gamestateTEST:r.gamestate,winner:r.winner&&JSON.parse(r.winner)}),e.game.player_1=a.data,e.game.player_2=c.data,t()})));case 13:case"end":return t.stop()}}),t)})))()}}};n("117e");const pt=d()(dt,[["render",et],["__scopeId","data-v-9a3beece"]]);var mt=pt,Ot=[{path:"/",redirect:"login"},{path:"/login",name:"login",component:U,props:!0,beforeEnter:function(e,t,n){w.state.authenticated?n("/home"):n()}},{path:"/home",name:"home",component:ve,props:!0,beforeEnter:function(e,t,n){w.state.authenticated?n():n("/login")}},{path:"/profile",name:"profile",component:Se,props:!0,beforeEnter:function(e,t,n){w.state.authenticated?n():n("/login")}},{path:"/game/:game_id",name:"game",component:mt,props:!0,beforeEnter:function(e,t,n){w.state.authenticated?n():n("/login")}},{path:"/:catchAll(.*)",redirect:"login"}],jt=Object(v["a"])({history:Object(v["b"])(),routes:Ot}),ft=jt,gt=Object(r["c"])(_);gt.use(ft),gt.use(w),gt.mount("#app")},6800:function(e,t,n){"use strict";n("83e4")},6958:function(e,t,n){"use strict";n("9f26")},7094:function(e,t,n){"use strict";n("42b0")},"70b7":function(e,t,n){"use strict";n("979a")},"83e4":function(e,t,n){},"950e":function(e,t,n){},"979a":function(e,t,n){},"9a7c":function(e,t,n){"use strict";n("950e")},"9f26":function(e,t,n){},c44d:function(e,t,n){},c8c2:function(e,t,n){},ce42:function(e,t,n){"use strict";n("c8c2")}});
//# sourceMappingURL=app.3bcc7673.js.map